# A document can have any number of runs
# Runs don't have to be in order in the document, but if they are it'll go slightly faster
# Only the prompt is required for a run. When a value is left out the last known one is used
# You can stop the last value from being used by passing False for it

# When a run is finished, it's stored in a way where it won't be re-done unless the settings change
# So you can keep adding to and re-running a file and only run the new runs each time

# Prompt structure is parts seperated by modifiers, starting and ending with a part:
#   part->mod->part->mod->part
# Parts are one or more concurrent prompts with an optional duration
# These will be added and removed over the course of the run
# Modifiers adjust the current prompt list somehow before adding the next one:
# --: Remove the newest prompt
# __: Remove the oldest prompt
# ++: Add the next prompt (technically does nothing as the next prompt is always added)
# ||: Clear all prompts
# {n}: Run this part n times longer than the others, can be placed anywhere in the part
# a&&b: Run a and b at the same time, they are treated as a pair for {} but not -- and __
#   They're just pushed onto the prompt list one at a time like normal
# Example: 'a++b--c__d||e&&f{2}'
#   Run a -> add b -> remove b, add c -> remove a, add d -> remove everything, add e and f
#   e and f will be run twice as long as the others, i.e. 1:1:1:2 ratio
# If you use only alphabetical characters for a prompt, it doesn't have to be quoted
# But if you use any numbers or special characters, wrap the prompt in quotes.

# Allowed values and defaults:
# image_prompt: False - if you have too many/too big images, you'll go out of memory
# iterations: 200 - plateaus after much longer but prompt chains might need more iterations
# images: 20 - to give a sense of progress, since videos are disabled by default
# size: [730, 730] - if size is too big you'll go oom, this is tuned for Colab
# init_image: False - Image to start drawing on, defaults to random noise
# step_size: 0.05 - How much the image changes with each iteration
# seed: 0 - Random number seed, change to get different versions of the same run
# video: False - Use images as frames for a video
# fps: 24  - frames per second of video, does nothing if video is False

title: Neon Library Demo # Title is required, will be used as output folder name
neon:
  # Images to make per run. These will be displayed as they're made to give a view of the progress
  images: 10  # WARNING: If images is higher than iterations, you'll get a division by 0 error
  iterations: 100
  prompt: dynamic billowing neon
# If you only want to define a prompt and no other options, you can do so in one line:
# these runs will use the images and iterations values from above
space: outer space sky ocean galaxy
lib: in a sacred library by James Gurney
# You can reference other prompts and image outputs with '[ref]'
# for example, '[lib]' will be replaced with 'in a sacred library by James Gurney'
a_cycle: '[lib]--[neon]--[space]'
b_cycle: '[space]--[lib]--[neon]'
c_cycle: '[neon]--[space]--[lib]'
concur: '[neon]&&[space]&&[lib]'
bigcycle_image_prompt:
  iterations: 600
  images: 400
  video: True # use the images as frames for video. Video will be in the main folder, not the run folder
  # a&b -> b&c -> c&a
  image_prompt: '[a_cycle]&&[b_cycle]__[c_cycle]__[a_cycle]'
bigcycle_prompt:
  # Explicitly un-set the value from the last run
  # If you don't do this, the last known value will be used
  # There ALWAYS has to be a prompt, so don't unset it. That's the only required setting.
  image_prompt: False
  # more complex because the prompts for a b and c are themselves chains, they're just dropped in:
  # [lib]--[neon]--[space]&&[space]--[lib]--[neon]__[neon]--[space]--[lib]__[lib]--[neon]--[space]
  # l -> n -> s&s -> s&l -> s&n -> n&n -> n&s -> n&l -> l&l -> l&n -> l&s
  prompt: '[a_cycle]&&[b_cycle]__[c_cycle]__[a_cycle]'
chess_neon:
  video: False # Videos are kind of big, avoid writing them unless you specifically want to
  # by default it starts drawing on random noise
  # you can also pass in an initial image for it to start drawing on
  # the image will be stretched to size, for init image and image prompt
  # both image prompts and init images can take a URL
  # but URLs can contain some of the special characters I use and that will break parsing, so be careful
  # I'd recommend uploading your image to imgur just to be safe
  images: 20
  init_image: 'https://i.imgur.com/3Qk0orG.png'
  iterations: 200
  prompt: '[neon]'
chess_lib:
  prompt: '[lib]'
seed_chess_lib:
  # Artbot uses random numbers, but always the same string of random numbers for a given seed
  # if you want a different version of the same run, change the seed
  seed: 1337